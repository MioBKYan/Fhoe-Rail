[原项目StarRailAssistant](https://github.com/Starry-Wind/StarRailAssistant)         [聚合使用March7thAssistant](https://github.com/moesnow/March7thAssistant)      [同类程序StarRailAutoProxy](https://github.com/DoctorReid/StarRailAutoProxy) 

[同类程序StarRail-FastRun](https://github.com/Souloco/StarRail-FastRun)       [模拟器运行StarRailCopilot](https://github.com/LmeSzinc/StarRailCopilot)             

------

# 请使用远程角色跑图，暂时除了需要把帧数调为60帧外无特殊要求
# 脚本原则上免配置启动，附加功能需要自行在配置中打开，黄泉版本的地图也在设置里面（测试ing）

## 免责声明

本软件是一个外部工具旨在自动化崩坏星轨的游戏玩法。它被设计成仅通过现有用户界面与游戏交互,并遵守相关法律法规。该软件包旨在提供简化和用户通过功能与游戏交互,并且它不打算以任何方式破坏游戏平衡或提供任何不公平的优势。该软件包不会以任何方式修改任何游戏文件或游戏代码。

This software is open source, free of charge and for learning and exchange purposes only. The developer team has the final right to interpret this project. All problems arising from the use of this software are not related to this project and the developer team. If you encounter a merchant using this software to practice on your behalf and charging for it, it may be the cost of equipment and time, etc. The problems and consequences arising from this software have nothing to do with it.

本ソフトウェアは、崩壊：スターレイルのゲームプレイを自動化するために設計された外部ツールです。 既存のユーザーインターフェイスを通じてのみゲームと連動し、関連法規を遵守するように設計されています。 本パッケージは、その機能性により、シンプルさとゲームとのユーザーインタラクションを提供することを目的としており、ゲームバランスを崩したり、不当な利益を提供することは一切意図していません。 本パッケージはゲームファイルやゲームコードを一切変更しません。

本软件开源、免费，仅供学习交流使用。开发者团队拥有本项目的最终解释权。使用本软件产生的所有问题与本项目与开发者团队无关。禁止使用本软件进行大规模商业化行为；若您遇到商家使用本软件进行代练并收费，可能是设备与时间等费用，产生的问题及后果与本软件无关。软件非商业化项目，故与其他软件/游戏/程序并没有也不可能会构成不正当竞争、以及著作权侵权的行为，特此声明。

请注意，根据MiHoYo的 [崩坏:星穹铁道的公平游戏宣言](https://sr.mihoyo.com/news/111246?nav=news&type=notice):

```
"严禁使用外挂、加速器、脚本或其他破坏游戏公平性的第三方工具。"
"一经发现，米哈游（下亦称“我们”）将视违规严重程度及违规次数，采取扣除违规收益、冻结游戏账号、永久封禁游戏账号等措施。"
```

------

**集成版本选图**请在命令行输入：Fhoe-Rail.exe --debug

程序只支持**1920*1080游戏分辨率**，部分屏幕无法识别全屏幕，请切换非全屏幕重试

**程序缺陷**：程序闪退可能造成atl键或shift键持续处于按下状态，需要手动按下解除

识图为截取游戏画面，所以不能有任何覆盖（小心各类弹窗）

请勿在非自动战斗状态时移动鼠标或操作键盘

## 全自动锄地流程

仅提供思路作为参考：

进入电脑bios开启来电自启功能，需智能插座*1（如米家智能插座3），定时开启电源（推荐峰谷电的谷电时间），将星铁的游戏快捷方式（不是启动器）放到map文件夹和开启自启动文件夹，开启跑完关机

缺点：遇到更新或者网络卡顿会卡死住（脚本未设计点击方案），所以建议再设定一个定时关闭电源（时间可参考之前跑完全图后的日志计时）

## 功能区分

- [x] 疾跑
- [x] 过期邮包/艾迪恩代币
- [x] 4点续锄(跨日)
- [x] 使用秘技
- [x] 自动开/关机/注销
- [x] 地图拖拽
- [x] 定时启动
- [ ] GUI

## 关于跑图

### 跑图须知

- **1号位为跑图角色**

- 请事先开完全部锚点，完成地图上可以干扰图片识别传送的一切任务，因此造成的卡图现象本项目不予处理

- 【仅适用于最新版本】禁闭舱段未开启的，请删除1-4-X；绥园未开启的，请删除3-5-X；匹诺康尼未开启的，请删除4-X

- 其他地方卡住的，请留意是否有未开启的机关或者地图上有任务标识等影响识别

- **请不要修改默认键位，由此造成的卡图请自行解决**

### 跑图模型分类

现有模型分类（可能有误，待修正）：

成年模型且攻击为远程无位移跑图最佳、少女模型可能会卡

| 模型 | 角色                                           |
| ---- | --------------------------------------------- |
| 少女 | 青雀、佩拉、符玄、三月七、艾丝妲              |
| 成女 | 阮•梅、托帕、黑天鹅、布洛妮娅、驭空、娜塔莎、 |
| 少年 | 无                                            |
| 成男 | 丹恒•饮月、瓦尔特                             |

### 地图选择

地图选择方式：以【debug模式运行】或直接运行【自选地图.bat】，选择【设置】，即可选择对应的地图

| 地图名称 | 地图说明 |
| ---------- | -------------------------------------------------------- |
| default       | 默认地图，适配大部分远程角色 |
| technique     | 加入了较多的击打紫色秘技，且在战斗中使用较多秘技 |
| HuangQuan     | 黄泉专用地图，自行备足秘技零食 |

## 关于配置

### 配置说明

配置对应项目时，是均为true，否均为false

| 配置项目 | 配置说明 |
| ----------------------- | ----------------------------------- |
| auto_final_fight_e | 是否允许每个地图最后一击改为秘技攻击 |
| auto_final_fight_e_cnt | 每个地图最后一击为秘技攻击上限次数 |
| allow_fight_e_buy_prop | 是否允许自动吃秘技零食，使用黄泉地图时会自动设置为允许 |
| auto_run_in_map | 是否允许在地图中疾跑 |
| detect_fight_status_time | 识别是否进入战斗的时间（秒），默认5 |
| map_version | 使用的地图文件夹 |
| main_map | 优先星球，1-空间站，2-雅利洛VI，3-仙舟，4-匹诺康尼 |
| allow_run_again | 是否允许每次运行连续锄地2次避免漏怪 |
| allow_run_next_day | 是否允许等待至下一个凌晨4点继续从头锄地 |
| allow_map_buy | 是否允许购买 代币 与 过期邮包 |
| allow_snack_buy | 是否允许购买秘技零食的制作材料 |

## 关于地图录制

### 录制方式

感谢[@AlisaCat](https://github.com/AlisaCat-S)

禁止用鼠标移动视角，只能使用方向键左右来移动视角（脚本运行后方向键左右会映射鼠标移动）

录制期间能且只能按动键盘上的一个有效按键（也就是不能同时按下多键）

脚本只会录制按键按下时间和移动的视角，不会录制停顿的时间（可以慢慢一个键一个键录制，保证录制准确性）

录制完成后F9停止录制并保存。

（只有WSADF鼠标右键X参与录制，其他键值只能自己修改）

1. 完成后将会生成output(时间).json文件，请把他重命名替换成你要更改的地图json，并且将传送点截图重命名并保存到picture即可使用 （就可以申请到map分支提交，或者交给管理提交）

2. 地图json中的空白填写示例：

   ~~~
   {
       "name": "乌拉乌拉-1",       （地图json名为1-1_1.json）
       "author": "Starry-Wind",   （作者名，第二作者不能覆盖第一作者名称）
       "start": [           （开局传送地图识别图片，并将鼠标移动至图片中间并按下按键）
           {"map": 1},         （按下m键打开地图）
           {"picture\\orientation_1.jpg": 1.5},     （识别到orientation_1.jpg图片后，将鼠标移动至图片中间并按下按键）
           {"picture\\map_1.jpg": 2},               （具体图片自己看，一般为该区域名"乌拉乌拉"的地图文字）
           {"picture\\map_1_point_1.jpg": 1.5},       （第一个传送点的图片）
           {"picture\\transfer.jpg": 1.5}              （"传送"字的图片）
       ]
   }
   ~~~

### 键位映射

| 键位       | 映射                                                     |
| ---------- | -------------------------------------------------------- |
| other      | 未列出的任意键都视为移动键，后面的数字代表按下的时间长短 |
| X          | 进入战斗，map映射为fighting=1                            |
| 鼠标左键   | 打障碍物，map映射为fighting=2                            |
| f/r/space  | 交互键，后面的数字代表反复按键的时间次数，间隔随机       |
| shutdown   | 关机标志，键值无意义，控制开关在配置文件中               |
| mouse_move | 视角转动，因数值计算复杂（不同设备数值不同），已被弃用   |
| scroll     | 鼠标滚轮滚动的数值，同样较为复杂，未被启用               |
| e          | 键值为1时，使用秘技并追加普通攻击              |
| e          | 键值为2时，仅使用秘技；适用于强化型秘技角色              |
| esc        | 只有键值为1时有意义，等同于按下了一次Esc键               |
